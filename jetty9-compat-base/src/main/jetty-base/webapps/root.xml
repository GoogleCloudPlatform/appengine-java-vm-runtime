<?xml version="1.0"  encoding="ISO-8859-1"?>
<!--
  ~ Copyright 2016 Google Inc. All Rights Reserved.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~       http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure_9_1.dtd">

<!-- ================================================================== -->
<!-- Configure and deploy the application in $(jetty.home)/webapps/root -->
<!-- ================================================================== -->

<Configure class="com.google.apphosting.vmruntime.jetty9.VmRuntimeWebAppContext" >
  <Set name="contextPath">/</Set>
  <Set name="resourceBase"><SystemProperty name="root.webapp" default="./webapps/root"/></Set>
  <Call name="init">
    <Arg><SystemProperty name="appengine_web_xml" default="WEB-INF/appengine-web.xml"/></Arg>
  </Call>

  <!-- Set quickstartWebXml to generate rather than start -->
  <Set name="quickstartWebXml"><SystemProperty name="quickstart_web_xml"/></Set>

  <Set name="parentLoaderPriority">
    <SystemProperty name="jetty_parent_classloader" default="false"/>
  </Set>
  <Set name="defaultsDescriptor">
    <SystemProperty name="jetty.base" default="."/>/etc/webdefault.xml
  </Set>

  <!-- Allow directory symbolic links  -->
  <!--Call name="addAliasCheck">
    <Arg>
      <New class="org.eclipse.jetty.server.handler.ContextHandler$ApprovePathPrefixAliases"/>
    </Arg>
  </Call-->

  <!-- Allow start exceptions to propagate -->
  <Set name="throwUnavailableOnStartupException">true</Set>

</Configure>
